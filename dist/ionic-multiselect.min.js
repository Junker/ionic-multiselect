!function(){"use strict";angular.module("ionic-multiselect",[]).filter("translateItem",["$injector","$parse",function(e,t){return function(a,l){var n;try{var n=e.get("$filter"),r=t("item."+l.valueProperty),i=r(l);return n("translate")(l.indexTranslate+i)}catch(o){return""}}}]).filter("showTextData",["$injector",function(e){return function(t,a){var l;try{var l=e.get("$filter")}catch(n){}var r=[];if(t.indexOf("^")>-1){r=t.split("^"),r=r.filter(Boolean);for(var i=r.length,o=0;o<i;o++){if(a.isTranslate)var u=l("translate")(a.indexTranslate+r[o].trim());else var u=r[o].trim();r[o]=u}}else a.isTranslate?r.push(l("translate")(a.indexTranslate+t.trim())):r.push(t);return 0==r.length?"":r}}]).provider("multiselect",function(){this.setModalTemplateUrl=function(e){this.modalTemplateUrl=e},this.setTemplateUrl=function(e){this.templateUrl=e},this.$get=function(){return this}}).directive("multiselect",["$ionicModal","multiselect",function(e,t){return{restrict:"E",template:function(e,a){return a.templateUrl||t.templateUrl?"<ng-include src=\"'"+(a.templateUrl||t.templateUrl)+"'\"></ng-include>":""},scope:{items:"=",defaultValue:"=",valueChangedCallback:"&valueChanged",getCustomTextCallback:"&getCustomText"},link:function(a,l,n){a.form={},a.headerText=n.headerText||"",a.text=n.text||"",a.defaultText=n.text||"",a.checkedProperty=n.checkedProperty||"checked",a.textProperty=n.textProperty||"text",a.valueProperty=n.valueProperty||"id",a.isTranslate="true"===n.isTranslate||!1,a.indexTranslate=n.indexTranslate||"",a.modalTemplateUrl=n.modalTemplateUrl||t.modalTemplateUrl,a.modalAnimation=n.modalAnimation,a.noteText=n.noteText||"",a.hasSearch=n.hasSearch||!1,a.searchPlaceholder=n.searchPlaceholder||"Search",a.form.searchValue="",a.modalTemplateUrl?e.fromTemplateUrl(a.modalTemplateUrl,{scope:a,animation:a.modalAnimation}).then(function(e){a.modal=e}):a.modal=e.fromTemplate("",{scope:a,animation:a.modalAnimation}),a.$on("$destroy",function(){a.modal.remove()}),a.getItemText=function(e){return a.textProperty?e[a.textProperty]:e},a.getItemValue=function(e){return a.valueProperty?e[a.valueProperty]:e},a.getText=function(e){var t=e?e:[],l="";return t.length?angular.forEach(a.items,function(e,n){for(var r=0;r<t.length;r++)if(a.getItemValue(e)==t[r]){l+=a.isTranslate?(l.length?"^":"")+a.getItemValue(e):(l.length?"^":"")+a.getItemText(e);break}}):l=a.defaultText,l.length||a.isTranslate||(l=a.defaultText),a.isTranslate&&""==l.trim()&&(l="^"),a.getCustomTextCallback({value:e})||l},a.hideItems=function(e){a.modal.hide()},a.onCheckValueChanged=function(e,t){"undefined"!=typeof e&&a.valueChangedCallback({value:e})},a.onValueChanged=function(e,t){a.text=a.getText(e)},a.showItems=function(e){e.preventDefault(),a.modal.show()},a.validate=function(){a.fetchCheckedItems(),a.hideItems()},a.fetchCheckedItems=function(){if(a.value=[],a.items){var e=[];angular.forEach(a.items,function(t,l){t[a.checkedProperty]?(a.value[l]=a.getItemValue(t),e.push(t)):a.value[l]=""}),a.itemChecked=e}},a.fetchCheckedDefaultItems=function(){if(void 0!=a.defaultValue&&(a.value=[],a.items)){var e=[];angular.forEach(a.defaultValue,function(t){angular.forEach(a.items,function(l,n){l[a.valueProperty]==t&&(a.value[n]=a.getItemValue(l),l.checked=!0,e.push(l))})}),a.itemChecked=e}},a.fetchCheckedDefaultItems(),a.$watch("itemChecked",a.onCheckValueChanged,!0),a.$watch("value",a.onValueChanged,!0),a.$watch("items",a.fetchCheckedItems,!0),a.$watch("defaultValue",a.fetchCheckedDefaultItems,!0)}}}])}();